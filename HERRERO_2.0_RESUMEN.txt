#!/usr/bin/env python
# -*- coding: utf-8 -*-
"""
RESUMEN HERRERO 2.0 - ImplementaciÃ³n Completa
Muestra todos los cambios y nuevas caracterÃ­sticas
"""

from src.models import Weapon
from src.facilities import Herrero

print("""
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    âš’ï¸  HERRERO 2.0 - IMPLEMENTACIÃ“N COMPLETA                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
""")

print("""
ğŸ“‹ CAMBIOS PRINCIPALES:
""")

cambios = [
    ("Sistema de Mejora", "Anterior: Bonus fijos (+3/+5/+7/+10 ATK)", "Nuevo: % escalado (+8%/+12%/+15%/+20% por tier)"),
    ("Costos", "Anterior: Flat (100/200/400/800g)", "Nuevo: CuadrÃ¡tico (base Ã— tipo Ã— nivelÂ²)"),
    ("Durabilidad", "Anterior: No existÃ­a", "Nuevo: Tracking completo, -5% por mejora"),
    ("ReparaciÃ³n", "Anterior: No existÃ­a", "Nuevo: Costo dinÃ¡mico por degradaciÃ³n"),
    ("Multiplicador Tipo", "Anterior: No existÃ­a", "Nuevo: Corta Ã—0.8, Media Ã—1.0, Grande Ã—1.3"),
    ("EstadÃ­sticas", "Anterior: BÃ¡sicas", "Nuevo: Tracking de armas mejoradas, ATK otorgado, reparaciones"),
]

for concepto, anterior, nuevo in cambios:
    print(f"  â€¢ {concepto:20} | {anterior:45} â†’ {nuevo}")

print("""

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                            ğŸ”¨ EJEMPLOS DE COSTOS                            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
""")

# Mostrar ejemplos de costos
herrero = Herrero(nivel=3)

ejemplos = [
    ("Daga Oxidada", 5, 1, "corta"),
    ("Espada Corta", 10, 1, "corta"),
    ("Espada Gladius", 15, 2, "media"),
    ("Tridente Romano", 14, 2, "media"),
    ("Martillo Guerra", 16, 2, "media"),
    ("Lanza Corta", 12, 1, "grande"),
    ("Hacha Doble", 25, 3, "grande"),
    ("Espada de Marte", 30, 4, "grande"),
]

for nombre, atk, tier, tipo_arma in ejemplos:
    print(f"\nâš”ï¸  {nombre:20} | ATK: {atk:2} | Tier {tier} | Tipo: {tipo_arma:6}")
    print(f"   Multiplicador: Ã—{herrero.multiplicador_tipo[tipo_arma]:.1f}")
    
    # Muestra costos para primeras 4 mejoras
    costo_base = herrero.costo_base_mejora[tier]
    tipo_mult = herrero.multiplicador_tipo[tipo_arma]
    
    costos = []
    for nivel in range(1, 5):
        costo = int(costo_base * tipo_mult * (nivel ** 2))
        costos.append(costo)
    
    print(f"   Costos mejora: +1: {costos[0]:4}g | +2: {costos[1]:4}g | +3: {costos[2]:4}g | +4: {costos[3]:4}g")

print("""

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                      ğŸ› ï¸  SISTEMA DE DURABILIDAD                             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

DEGRADACIÃ“N (por mejora):
  â€¢ Cada mejora reduce -5% la durabilidad del arma
  â€¢ Ejemplos:
    - Espada +0: 100% durabilidad
    - Espada +3: 85% durabilidad
    - Espada +5: 75% durabilidad

REPARACIÃ“N (costo dinÃ¡mico):
  â€¢ Costo = (100 - durabilidad_actual) Ã— precio_base / 10
  â€¢ Ejemplos (Tier 2, base 200g):
    - Reparar de 95% â†’ 100%: (100-95) Ã— 200 / 10 = 100g
    - Reparar de 50% â†’ 100%: (100-50) Ã— 200 / 10 = 1000g
    - Reparar de 0% â†’ 100%:  (100-0) Ã— 200 / 10 = 2000g

DECISIONES TÃCTICAS:
  âœ“ Â¿Mejorar arma cara (riesgo durabilidad) o barata?
  âœ“ Â¿Reparar temprano (barato) o esperar (caro)?
  âœ“ Â¿Vender arma muy degradada o repararla?

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ğŸ“Š MENU HERRERO (5 Opciones Nuevas)                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. MEJORAR ARMA
   â€¢ Selecciona arma del inventario
   â€¢ Muestra costo de prÃ³xima mejora
   â€¢ Aplica % bonus ATK
   â€¢ Degrada durabilidad -5%
   â€¢ Feedback: antes/despuÃ©s/durabilidad/costo

2. REPARAR ARMA
   â€¢ Selecciona arma del inventario
   â€¢ Muestra durabilidad actual
   â€¢ Costo dinÃ¡mico por degradaciÃ³n
   â€¢ Restaura a 100%
   â€¢ Feedback: antes/despuÃ©s/durabilidad restaurada/costo

3. VER ARMAS DISPONIBLES
   â€¢ Compra armas nuevas (separado de mejorar)
   â€¢ Respeta tier desbloqueado por nivel Herrero
   â€¢ Stock completo de tienda

4. MEJORAR HERRERO
   â€¢ Sube nivel Herrero (1-5)
   â€¢ Desbloquea nuevo tier de armas
   â€¢ Costo: 600â†’1200â†’2500â†’4000g
   â€¢ Feedback: nivel actual y tier desbloqueado

5. ESTADÃSTICAS
   â€¢ Armas mejoradas (contador)
   â€¢ ATK total otorgado (suma)
   â€¢ Armas reparadas (contador)
   â€¢ Durabilidad restaurada (suma)
   â€¢ VisualizaciÃ³n tipo MÃ©dico

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                         âš¡ BALANCE ACTUAL                                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TIER 1 (BÃ¡sico):
  â€¢ Daga Oxidada: 5 ATK â†’ +1 por mejora â†’ 6/7/8/9/10 ATK
  â€¢ Costos: 80g â†’ 320g â†’ 720g â†’ 1280g â†’ 2000g (TOTAL: 4400g)
  
TIER 2 (Intermedio):
  â€¢ Espada Gladius: 15 ATK â†’ +1-2 por mejora â†’ 16/17-18/19-21/...
  â€¢ Costos: 200g â†’ 800g â†’ 1800g â†’ 3200g (TOTAL: 6000g)
  
TIER 3 (Avanzado):
  â€¢ Espada Gladius +2: 20 ATK â†’ +3 por mejora â†’ 23/26/29/32 ATK
  â€¢ Costos: 400g â†’ 1600g â†’ 3600g â†’ 6400g (TOTAL: 12000g)
  
TIER 4 (Legendario):
  â€¢ Espada de Marte: 30 ATK â†’ +6 por mejora â†’ 36/42/48/54 ATK
  â€¢ Costos: 1040g â†’ 4160g â†’ 9360g â†’ 16640g (TOTAL: 31200g)

ANÃLISIS:
  âœ“ Armas baratas: muchas mejoras posibles (~5 antes de quedarse sin dinero)
  âœ“ Armas caras: decisiÃ³n tÃ¡ctica (una o dos mejoras mÃ¡ximo)
  âœ“ No hay "arma Ãºnica OP" - balance mantenido
  âœ“ ProgresiÃ³n viaja a travÃ©s de tiers, no solo mejoras

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                      âœ… IMPLEMENTACIÃ“N COMPLETADA                            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ARCHIVOS MODIFICADOS:
  â€¢ src/facilities.py: Clase Herrero completamente reescrita (360 lÃ­neas)
  â€¢ main.py: menu_herrero() actualizado con 5 opciones nuevas (200 lÃ­neas)

TESTS:
  â€¢ test_herrero_v2.py: Test funcional completo âœ… PASADO
  â€¢ CompilaciÃ³n: âœ… OK (facilities.py + main.py)

PRÃ“XIMOS PASOS:
  1. Evento enemigos mejoran cada 50 dÃ­as
  2. Balanceo segÃºn feedback del usuario
  3. UI visual para mostrar progresiÃ³n de durabilidad

""")
